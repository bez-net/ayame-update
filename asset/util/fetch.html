<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Document</title>
<style>
body {
  margin: 1rem;
}
h2 {
  color: purple;
	font-family: 'Comic Sans MS';
	font-size: 2em;  
}
</style>
</head>
<body>
<h2>File Upload (fetch) to Server</h2>
</head>
<body>
<form id="upload">
  <label>Filename:</label>
  <input type="file" name="file">
  <input type="submit" value="Upload" onclick="FileUpload()">
</form>
</body>
<script>
function FileUpload() {
  var input = document.querySelector('input[type="file"]')

  var form = new FormData()
  form.append('file', input.files[0])
  // form.append('user', 'stoney')

  const options = {
  method: 'POST',
  body: form,
  // If you add this, upload won't work
  // headers: {
  //   'Content-Type': 'multipart/form-data',
  // }
  };
  delete options.headers['Content-Type'];

  fetch('/fetch', options)
    .then(response => {
      return response.blob();
    })
    .catch(error => console.log(error))
}
</script>
</html>